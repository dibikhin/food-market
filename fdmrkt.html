<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>
        Фдмркт Прототип
    </title><!--Bootstrap-->
    <link href=
    "https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap.min.css" rel=
    "stylesheet"><!--Bootstrap Tokenfield-->
    <link href=
    "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tokenfield/0.12.0/css/bootstrap-tokenfield.min.css"
    rel="stylesheet"><!--Tokenfield Typeahead-->
    <link href=
    "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tokenfield/0.12.0/css/tokenfield-typeahead.min.css"
    rel="stylesheet"><!--JQueryUI CSS-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.css" rel=
    "stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
<div class="container">
    <!--<div class="row">-->
    <!--  <div class="col-md-6 col-md-offset-3">-->
    <!--    <h1>-->
    <!--      Фдмркт Прототип-->
    <!--    </h1>-->
    <!--  </div>-->
    <!--</div>-->
    <div class="row" style="margin-top: 20px;">
        <div class="col-md-6 col-md-offset-3">
            <form>
                <div class="form-group">
                    <input class="form-control" id="food" placeholder=
                    "Какие продукты есть?" type="text">
                </div>
            </form>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <p id="not-found-recipes">
                Введите продукты, и тут появятся блюда.
            </p>
            <!-- Tab panes -->
            <div class="tab-content" id="found-dishes">
                <div role="tabpanel" class="tab-pane active" id="recipe-list">
                    <div id="rcp0">
                        <h3>
                            Шурпа <span class="label label-default">1ч 20мин</span>
                        </h3>
                        <p>
                            Для борща нужна морковка.
                        </p>
                        <h4 style="margin-top: 20px;">
                            Не хватает
                        </h4>
                        <ul class="list-inline">
                            <li>Говяжьи косточки</li>
                            <li>Морковь</li>
                            <li>Свекла</li>
                        </ul>
                        <button class="btn btn-default" type="button">
                            <span class="glyphicon glyphicon-plus"></span>
                            &nbsp;Добавить в список
                        </button>
                        <a class="btn btn-default" href="#recipe" aria-controls="recipe" role="tab" data-toggle="tab">
                            <span class="glyphicon glyphicon-eye-open"></span>
                            &nbsp;Рецепт
                        </a>
                    </div>
                    <div id="rcp1">
                        <h3>
                            Щи из квашеной капусты с головизной <span class="label label-default">30мин</span>
                        </h3>
                        <p>
                            Возьми кошачью жопу, нарви мешок укропу...
                        </p>
                        <h4 style="margin-top: 20px;">
                            Не хватает
                        </h4>
                        <ul class="list-inline">
                            <li>Кошачья жопа</li>
                            <li>Квашеная капуста</li>
                            <li>Пучок укропа</li>
                        </ul>
                        <button class="btn btn-default" type="button">
                            <span class="glyphicon glyphicon-plus"></span>
                            &nbsp;Добавить в список
                        </button>
                        <a class="btn btn-default" href="#recipe" aria-controls="recipe" role="tab" data-toggle="tab">
                            <span class="glyphicon glyphicon-eye-open"></span>
                            &nbsp;Рецепт
                        </a>
                    </div>
                    <div id="rcp2">
                        <h3>
                            Борщ <span class="label label-default">4мин</span>
                        </h3>
                        <p>
                            Уронить кусок хлеба на пол.
                        </p>
                        <h4 style="margin-top: 20px;">
                            Не хватает
                        </h4>
                        <ul class="list-inline">
                            <li>Кусок хлеба</li>
                            <li>Пол</li>
                        </ul>
                        <button class="btn btn-default" type="button">
                            <span class="glyphicon glyphicon-plus"></span>
                            &nbsp;Добавить в список
                        </button>
                        <a class="btn btn-default" href="#recipe" aria-controls="recipe" role="tab" data-toggle="tab">
                            <span class="glyphicon glyphicon-eye-open"></span>
                            &nbsp;Рецепт
                        </a>
                    </div>
                </div>  <!--recipe-list-->
                
                <div role="tabpanel" class="tab-pane" id="recipe">
                    <div id="recipe-body">
                        <h3>
                            Шурпа <span class="label label-default" style="float: right;">1 ч 20 мин</span>
                        </h3>
                        <ul>
                            <li>Сварить мясной бульон.</li>
                            <li>Лук нарезать в&nbsp;виде соломки и&nbsp;поджарить в&nbsp;разогретом жире.</li>
                            <li>Мясо нарезать кусочками весом 25&ndash;30&nbsp;г, обжарить, смешать с&nbsp;поджаренным луком, добавить морковь, нарезанную кубиками, томат-пюре и&nbsp;жарение продолжать в&nbsp;течение 5&ndash;6&nbsp;минут.</li>
                            <li>Подготовленное таким образом мясо вместе с&nbsp;овощами переложить в&nbsp;кастрюлю, залить бульоном и&nbsp;довести до&nbsp;кипения.</li>
                            <li>Затем положить картофель, нарезанный дольками, соль, перец и&nbsp;варить 15&ndash;20&nbsp;минут.</li>
                        </ul>
                        <p>
                            На&nbsp;500&nbsp;г говядины&nbsp;&mdash; 750&nbsp;г картофеля, 2&nbsp;головки лука, 2&nbsp;шт. моркови, по&nbsp;2&nbsp;ст. ложки томата-пюре и&nbsp;масла.
                        </p>
                        <h4 style="margin-top: 20px;">
                            Не хватает
                        </h4>
                        <ul class="list-inline">
                            <li>Говяжьи косточки</li>
                            <li>Морковь</li>
                            <li>Свекла</li>
                        </ul>
                        <a class="btn btn-default" href="#to-buy-list" aria-controls="to-buy-list" role="tab" data-toggle="tab">
                            <span class="glyphicon glyphicon-plus"></span>
                            &nbsp;Добавить в список
                        </a>
                    </div>
                    <a class="btn btn-default" href="#recipe-list" aria-controls="recipe-list" role="tab" data-toggle="tab"
                        style="margin-top: 10px;">
                        Назад
                    </a>
                </div>
                
                <div role="tabpanel" class="tab-pane" id="to-buy-list">
                    <div id="to-buy-list-body">
                        <h3>
                            Купить
                            <!--<button class="btn btn-default" type="button">Отправить</button>-->
                        </h3>
                        <!--to-buy-search-->
                        <form class="form-inline addToListForm">
                            <div class="form-group">
                                <input type="text" name="listItemInput" class="form-control listItemInput" placeholder="Что купить?">
                            </div>
                            <label type="button" class="btn btn-default addToList">
                                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                                    &nbsp;Добавить
                            </label>
                            <label type="button" class="btn btn-default" id="clear-to-buy-food-list">
                                <span class="glyphicon glyphicon-erase" aria-hidden="true"></span>
                                    &nbsp;Очистить
                            </label>
                        </form>
                        
                        <div class="to-buy-food-list"></div>
                    </div>
                    <a class="btn btn-default" href="#recipe" aria-controls="recipe" role="tab" data-toggle="tab"
                        style="margin-top: 10px;">
                        Назад
                    </a>
                </div> <!--to-buy-list-->
            </div> <!--tab-content-->
        </div> <!--col-->
    </div> <!--row-->
    
</div>  <!--container-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src=
"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script> <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script src=
"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tokenfield/0.12.0/bootstrap-tokenfield.min.js"></script>
<script>
    $('#food').tokenfield({
        autocomplete: {
            source: [
                "Баклажаны",
                "Брюква",
                "Кабачки",
                "Капуста",
                "Картофель",
                "Коренья",
                "Лук",
                "Морковь",
                "Огурцы",
                "Перец",
                "Петрушка",
                "Ревень",
                "Редис",
                "Салат",
                "Свекла",
                "Сельдерей",
                "Спаржа",
                "Томаты",
                "Укроп",
                "Хрен",
                "Чеснок",
                "Шпинат"
            ],
            delay: 100
        }
    });
    
    $('#food-tokenfield').focus();
    
    $('#rcp0').hide(); $('#rcp1').hide(); $('#rcp2').hide();

    var findFood = function() {
        $('#rcp0').hide(); $('#rcp1').hide(); $('#rcp2').hide();
        $('#found-dishes').hide();
        $('#not-found-recipes').show();
        $('#found-dishes a[href="#recipe-list"]').tab('show');
        
        var chosenFood = null;
        var chosenFoodStr = $('#food').tokenfield('getTokensList', ' ');
        if (chosenFoodStr !== '') {
            chosenFood = chosenFoodStr.split(' ');
        } else { 
            return;
        }
        
        //  Шурпа, Щи, Борщ
        var recipes = [
        	"Сварить мясной бульон. Лук нарезать в виде соломки и поджарить в разогретом жире. Мясо нарезать кусочками весом 25–30 г, обжарить, смешать с поджаренным луком, добавить морковь, нарезанную кубиками, томат-пюре и жарение продолжать в течение 5–б минут. Подготовленное таким образом мясо вместе с овощами переложить в кастрюлю, залить бульоном и довести до кипения. Затем положить картофель, нарезанный дольками, соль, перец и варить 15–20 минут. На 500 г говядины – 750 г картофеля, 2 головки лука, 2 шт. моркови, по 2 ст. ложки томата-пюре и масла.",
        	"Голову осетровой рыбы разрубить на куски, удалить жабры, промыть, ошпарить, погрузив на 1–2 минуты в горячую воду, снова промыть, положить в кастрюлю, залить водой и поставить варить на слабый огонь на 3–4 часа. Спустя час с начала варки рекомендуется вынуть головизну шумовкой на блюдо и процедить бульон, чтобы в нем не оставалось мелких костей. Головизну разобрать, отделив мясо и хрящи; последние положить доваривать в бульон. За час до окончания варки хрящей положить в бульон тушеную квашеную капусту, подготовленную, как указано в рецепте «Щи из квашеной капусты», и поджаренные с  томатом коренья. Перед окончанием варки добавить соль, перец, лавровый лист и заправить мукой. На 1 кг головизны – 500 г квашеной капусты, 200 г кореньев и лука, 2 ст. ложки  томата-пюре, 2 ст. ложки масла, 1 ст. ложку муки. 2–3 л воды.",
        	"Сварить мясной бульон. Свеклу, морковь, петрушку и лук нарезать соломкой, положить в суповую кастрюлю, добавить помидоры или томат-пюре, уксус, сахар и немного бульона с жиром (или добавить 1–2 ст. ложки масла), закрыть крышкой и поставить овощи тушить. Овощи перемешивать, чтобы не пригорели, прибавляя, если нужно, немного бульона или воды. Через 15–20 минут добавить нашинкованную капусту, всё перемешать и тушить еще 20 минут. Затем овощи залить подготовленным мясным бульоном, положить перец, лавровый лист, соль, добавить по вкусу немного уксуса и варить до полной готовности овощей. При подаче на стол в борщ положить сметану. В борщ при варке добавляют картофель в целом виде или нарезанный дольками, а также свежие помидоры. Их также нарезают дольками и кладут в борщ за 5–10 минут до окончания варки. В готовый борщ кроме мяса можно положить вареную ветчину, сосиски или колбасу. Для подкрашивания борща можно сделать свекольный настой. Для этого одну свеклу нарезать ломтиками, залить стаканом горячего бульона, добавить чайную ложку уксуса и поставить на 10–15 минут на слабый огонь и довести до кипения. После этого настой процедить и влить в борщ перед подачей на стол. На 500 г мяса – 300 г свеклы, 200 г свежей капусты, 200 г кореньев и лука, 2 ст. ложки томата-пюре или 100 г помидоров, по 1 ст. ложке уксуса и сахара."
        ];
    
        $.each(chosenFood, function(__, fd) {
            $.each(recipes, function(ix_rcp, rcp) {
            	var found = rcp.search(new RegExp(fd + '.', 'i'));
                if (found !== -1) {
                    $('#rcp' + ix_rcp).show();
                    $('#not-found-recipes').hide();
                    $('#found-dishes').show();
                }
            });
        });
    };
    
    $('#food').on('tokenfield:createdtoken', findFood);
    // $('#food').on('tokenfield:editedtoken', findFood); //blinks
    $('#food').on('tokenfield:removedtoken', findFood);

    // to-buy-search
    // $('.addToListForm').submit(function(e) {
    //     e.preventDefault();        
    //     return false;
    // });
    
    var addToList = function() {
        var itemToAdd = $('input[name="listItemInput"]').val().trim();
        if(itemToAdd) {
            $('.to-buy-food-list').append(
                '<div class="checkbox"><label><input type="checkbox" value="' + itemToAdd + '">'+ itemToAdd +'</label></div>');
        }
        $('.listItemInput').val('').focus();
    };
    
    $(document).on('click', '.addToList', addToList);
    
    $(document).on('click', '#clear-to-buy-food-list', function() {
        $('.to-buy-food-list').html('');
    });
    
    $('.listItemInput').keypress(function(e) {
        if (e.which == 13) {
            addToList();
            e.preventDefault();        
            return false;
        }
    });
</script>
</body>
</html>

<!--// $('#tobuy').autocomplete({-->
<!--//     source: [-->
<!--//         "Укроп",-->
<!--//         "Хрен",-->
<!--//         "Чеснок",-->
<!--//         "Шпинат"-->
<!--//     ]-->
<!--// });-->